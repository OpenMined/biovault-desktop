apiVersion: syftbox.openmined.org/v1alpha1
kind: Flow
metadata:
  name: hello-world
  version: 0.1.0
  description: Minimal flow that writes a hello file.
  authors:
    - you@example.org
spec:
  inputs:
    datasites:
      type: List[String]
      default: ["local@localhost"]

  datasites:
    all: inputs.datasites
    groups:
      local:
        include:
          - "{datasites[0]}"

  modules:
    hello:
      apiVersion: syftbox.openmined.org/v1alpha1
      kind: Module
      metadata:
        name: hello
        version: 0.1.0
      spec:
        runner:
          kind: shell
          template: shell
          entrypoint: hello.sh
        outputs:
          - name: message
            type: File
            format: { kind: txt }
            path: hello.txt

  steps:
    - id: hello
      uses: hello
      run:
        targets: local
      publish:
        message: outputs.message
