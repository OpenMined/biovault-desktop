<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>BioVault Desktop</title>
		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				font-family: system-ui, -apple-system, sans-serif;
				height: 100vh;
				overflow: hidden;
				display: flex;
				flex-direction: column;
			}

			.tabs {
				display: flex;
				background: #f5f5f5;
				border-bottom: 2px solid #ddd;
			}

			.tab {
				padding: 15px 30px;
				cursor: pointer;
				border: none;
				background: none;
				font-size: 14px;
				font-weight: 500;
				color: #666;
			}

			.tab.active {
				background: white;
				color: #0066cc;
				border-bottom: 2px solid #0066cc;
				margin-bottom: -2px;
			}

			.tab-content {
				display: none;
				flex: 1;
				overflow: hidden;
			}

			.tab-content.active {
				display: flex;
				flex-direction: column;
			}

			.container {
				display: flex;
				flex: 1;
				overflow: hidden;
			}

			.left-panel {
				width: 300px;
				padding: 20px;
				border-right: 1px solid #ddd;
				background: #f5f5f5;
			}

			.right-panel {
				flex: 1;
				padding: 20px;
				overflow: hidden;
				display: flex;
				flex-direction: column;
				min-height: 0;
			}

			.pattern-section {
				margin-bottom: 20px;
				padding: 15px;
				background: #f5f5f5;
				border-radius: 4px;
				flex-shrink: 0;
			}

			.pattern-suggestions {
				display: flex;
				gap: 10px;
				margin: 10px 0;
				flex-wrap: wrap;
			}

			.pattern-btn {
				padding: 6px 12px;
				background: white;
				border: 1px solid #ddd;
				border-radius: 4px;
				cursor: pointer;
				font-size: 12px;
			}

			.pattern-btn.active {
				background: #0066cc;
				color: white;
				border-color: #0066cc;
			}

			@keyframes button-spin {
				0% {
					transform: rotate(0deg);
				}
				100% {
					transform: rotate(360deg);
				}
			}

			.btn-loading {
				opacity: 0.9;
				pointer-events: none;
			}

			.button-spinner {
				display: inline-block;
				width: 16px;
				height: 16px;
				border-radius: 50%;
				border: 2px solid rgba(255, 255, 255, 0.4);
				border-top-color: #ffffff;
				animation: button-spin 0.8s linear infinite;
				margin-right: 8px;
				vertical-align: middle;
			}

			.button-spinner-label {
				vertical-align: middle;
				font-size: inherit;
				font-weight: inherit;
			}

			.operation-progress {
				position: fixed;
				bottom: 18px;
				left: 50%;
				transform: translateX(-50%);
				width: 420px;
				max-width: calc(100vw - 32px);
				background: rgba(17, 24, 39, 0.92);
				border-radius: 12px;
				padding: 14px 16px;
				box-shadow: 0 18px 36px rgba(15, 23, 42, 0.28);
				backdrop-filter: blur(8px);
				display: none;
				pointer-events: none;
				z-index: 9998;
			}

			.operation-progress[data-visible='true'] {
				display: block;
			}

			.operation-progress-entry {
				margin-bottom: 10px;
				color: #e5e7eb;
			}

			.operation-progress-entry:last-child {
				margin-bottom: 0;
			}

			.operation-progress-label {
				font-size: 13px;
				font-weight: 600;
				margin-bottom: 6px;
			}

			.operation-progress-track {
				width: 100%;
				height: 6px;
				background: rgba(148, 163, 184, 0.35);
				border-radius: 999px;
				overflow: hidden;
			}

			@keyframes progress-indeterminate {
				0% {
					transform: translateX(-100%);
				}
				100% {
					transform: translateX(100%);
				}
			}

			.operation-progress-bar {
				width: 40%;
				height: 100%;
				background: linear-gradient(90deg, #60a5fa 0%, #818cf8 100%);
				border-radius: 999px;
				animation: progress-indeterminate 1.2s ease-in-out infinite;
			}

			.operation-progress-entry.waiting .operation-progress-bar {
				background: linear-gradient(90deg, #fbbf24 0%, #f59e0b 100%);
			}

			.operation-progress-entry.success .operation-progress-bar {
				animation: none;
				width: 100%;
				background: linear-gradient(90deg, #34d399 0%, #10b981 100%);
			}

			.operation-progress-entry.error .operation-progress-bar {
				animation: none;
				width: 100%;
				background: linear-gradient(90deg, #f87171 0%, #ef4444 100%);
			}

			.operation-progress-entry.success .operation-progress-label {
				color: #bbf7d0;
			}

			.operation-progress-entry.error .operation-progress-label {
				color: #fecaca;
			}

			.file-list-container {
				flex: 1;
				overflow-y: auto;
				display: flex;
				flex-direction: column;
				min-height: 0;
				width: 100%;
			}

			.highlight {
				background: yellow;
				font-weight: bold;
			}

			.import-button {
				position: absolute;
				bottom: 20px;
				right: 20px;
				padding: 12px 24px;
				background: #0066cc;
				color: white;
				border: none;
				border-radius: 4px;
				cursor: pointer;
				font-size: 14px;
				font-weight: 500;
			}

			.import-button:hover {
				background: #0052a3;
			}

			.import-button:disabled {
				background: #ccc;
				cursor: not-allowed;
			}

			#import-view {
				position: relative;
			}

			.table-container {
				flex: 1;
				overflow: auto;
				padding: 20px;
				display: flex;
				flex-direction: column;
				min-height: 0;
				justify-content: flex-start;
			}

			.table-container > table {
				flex: 0 0 auto;
			}

			table {
				width: 100%;
				border-collapse: collapse;
				background: white;
			}

			th {
				position: sticky;
				top: 0;
				background: #f5f5f5;
				padding: 12px;
				text-align: left;
				border-bottom: 2px solid #ddd;
				font-weight: 600;
				font-size: 13px;
				color: #333;
			}

			.sortable-files-header {
				cursor: pointer;
				user-select: none;
			}

			.sortable-files-header .sort-indicator {
				font-size: 10px;
			}

			td {
				padding: 10px 12px;
				border-bottom: 1px solid #eee;
				font-size: 13px;
			}

			tr:hover {
				background: #f9f9f9;
			}

			.truncate {
				max-width: 400px;
				overflow: hidden;
				text-overflow: ellipsis;
				white-space: nowrap;
			}

			#home-view {
				align-items: center;
				justify-content: center;
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			}

			.home-content {
				text-align: center;
				color: white;
			}

			.home-content h1 {
				font-size: 72px;
				font-weight: 700;
				margin: 0;
				text-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			}

			.home-content p {
				font-size: 20px;
				margin-top: 20px;
				opacity: 0.9;
			}

			.home-buttons {
				display: flex;
				gap: 20px;
				margin-top: 40px;
				justify-content: center;
			}

			.home-btn {
				padding: 15px 30px;
				background: white;
				color: #667eea;
				border: none;
				border-radius: 8px;
				font-size: 16px;
				font-weight: 600;
				cursor: pointer;
				transition: transform 0.2s;
			}

			.home-btn:hover {
				transform: translateY(-2px);
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
			}

			.done-button {
				position: absolute;
				bottom: 20px;
				right: 20px;
				padding: 12px 24px;
				background: #28a745;
				color: white;
				border: none;
				border-radius: 4px;
				cursor: pointer;
				font-size: 14px;
				font-weight: 500;
			}

			.done-button:hover {
				background: #218838;
			}

			#import-results-view {
				position: relative;
			}

			.import-project-section {
				padding: 20px;
				background: #f5f5f5;
				border-bottom: 1px solid #ddd;
			}

			.import-project-section input {
				width: 70%;
				padding: 10px;
				border: 1px solid #ddd;
				border-radius: 4px;
				font-size: 14px;
				margin-right: 10px;
			}

			.projects-list {
				flex: 1;
				overflow: auto;
				padding: 20px;
			}

			.project-card {
				background: white;
				border: 1px solid #ddd;
				border-radius: 8px;
				padding: 20px;
				margin-bottom: 15px;
				display: flex;
				justify-content: space-between;
				align-items: center;
			}

			.project-info h3 {
				margin: 0 0 10px 0;
				font-size: 18px;
			}

			.project-info p {
				margin: 5px 0;
				color: #666;
				font-size: 13px;
			}

			.delete-btn {
				padding: 8px 16px;
				background: #dc3545;
				color: white;
				border: none;
				border-radius: 4px;
				cursor: pointer;
				font-size: 13px;
			}

			.delete-btn:hover {
				background: #c82333;
			}

			.open-folder-btn {
				padding: 8px 16px;
				background: #17a2b8;
				color: white;
				border: none;
				border-radius: 4px;
				cursor: pointer;
				font-size: 13px;
				margin-left: 10px;
			}

			.open-folder-btn:hover {
				background: #138496;
			}

			.run-card {
				background: white;
				border: 1px solid #ddd;
				border-radius: 8px;
				padding: 20px;
				margin-bottom: 15px;
			}

			.run-card.success {
				border-left: 4px solid #28a745;
			}

			.run-card.failed {
				border-left: 4px solid #dc3545;
			}

			.run-info h3 {
				margin: 0 0 10px 0;
				font-size: 18px;
			}

			.run-info p {
				margin: 5px 0;
				color: #666;
				font-size: 13px;
			}

			.log-viewer {
				margin-top: 15px;
				background: #1e1e1e;
				color: #d4d4d4;
				font-family: 'Courier New', monospace;
				font-size: 12px;
				padding: 15px;
				border-radius: 4px;
				max-height: 400px;
				overflow-y: auto;
				white-space: pre-wrap;
				word-wrap: break-word;
			}

			.run-container {
				display: flex;
				height: 100%;
				gap: 20px;
				padding: 20px;
			}

			.selection-panel {
				flex: 1;
				display: flex;
				flex-direction: column;
				background: white;
				border: 1px solid #ddd;
				border-radius: 8px;
				padding: 20px;
			}

			.selection-panel h3 {
				margin-bottom: 15px;
			}

			.selection-list {
				flex: 1;
				overflow-y: auto;
				border: 1px solid #ddd;
				border-radius: 4px;
				padding: 10px;
			}

			.selection-item {
				padding: 10px;
				margin-bottom: 5px;
				background: #f5f5f5;
				border-radius: 4px;
				cursor: pointer;
				display: flex;
				align-items: center;
				gap: 10px;
			}

			.selection-item:hover {
				background: #e5e5e5;
			}

			.selection-item.selected {
				background: #0066cc;
				color: white;
			}

			.run-btn {
				margin-top: 20px;
				padding: 15px 30px;
				background: #28a745;
				color: white;
				border: none;
				border-radius: 4px;
				font-size: 16px;
				font-weight: 600;
				cursor: pointer;
			}

			.run-btn:hover {
				background: #218838;
			}

			.run-btn:disabled {
				background: #ccc;
				cursor: not-allowed;
			}

			button {
				padding: 10px 20px;
				background: #0066cc;
				color: white;
				border: none;
				border-radius: 4px;
				cursor: pointer;
				font-size: 14px;
			}

			button:hover {
				background: #0052a3;
			}

			select {
				width: 100%;
				padding: 8px;
				border: 1px solid #ddd;
				border-radius: 4px;
				background: white;
				font-size: 14px;
			}

			.path-display {
				margin-top: 15px;
				padding: 10px;
				background: white;
				border-radius: 4px;
				word-break: break-all;
				font-size: 12px;
			}

			.file-list {
				list-style: none;
				width: 100%;
			}

			.file-list-header {
				display: flex;
				padding: 8px 0;
				background: #f0f0f0;
				font-weight: 600;
				font-size: 12px;
				border-bottom: 2px solid #ddd;
				position: sticky;
				top: 0;
				z-index: 1;
				width: 100%;
			}

			.file-list-header > div {
				cursor: pointer;
				user-select: none;
				display: flex;
				align-items: center;
				gap: 4px;
				padding: 0 8px;
				position: relative;
				overflow: hidden;
			}

			.file-list-header > div:hover {
				color: #0066cc;
			}

			.file-list-header .sort-indicator {
				font-size: 10px;
			}

			.col-checkbox {
				width: 40px;
				flex-shrink: 0;
			}

			.col-path {
				width: 200px;
				min-width: 100px;
			}

			.col-filename {
				width: 180px;
				min-width: 100px;
			}

			.col-extension {
				width: 60px;
				min-width: 50px;
				flex-shrink: 0;
			}

			.col-participant {
				width: 150px;
				min-width: 100px;
			}

			.col-actions {
				width: 40px;
				flex-shrink: 0;
			}

			.column-resizer {
				position: absolute;
				right: 0;
				top: 0;
				bottom: 0;
				width: 4px;
				cursor: col-resize;
				background: transparent;
				z-index: 2;
			}

			.column-resizer:hover {
				background: #0066cc;
			}

			.column-resizer.resizing {
				background: #0066cc;
			}

			.file-list li {
				display: flex;
				padding: 8px 0;
				border-bottom: 1px solid #eee;
				font-size: 13px;
				align-items: center;
				width: 100%;
			}

			.file-list li.already-imported {
				opacity: 0.5;
			}

			.file-list li.already-imported:hover {
				background: inherit;
			}

			.file-list li > * {
				padding: 0 8px;
				overflow: hidden;
				text-overflow: ellipsis;
				white-space: nowrap;
			}

			.file-list li .file-path {
				direction: rtl;
				text-align: left;
				overflow: hidden;
				text-overflow: ellipsis;
			}

			.file-path span {
				direction: ltr;
				unicode-bidi: embed;
			}

			.file-checkbox {
				cursor: pointer;
				margin: 0;
			}

			.col-checkbox {
				display: flex;
				align-items: center;
				justify-content: center;
			}

			.col-actions {
				display: flex;
				align-items: center;
				justify-content: center;
			}

			.file-list li:hover {
				background: #f5f5f5;
			}

			.file-path {
				overflow: hidden;
				text-overflow: ellipsis;
				white-space: nowrap;
			}

			.col-participant {
				padding: 0 !important;
			}

			.participant-id-input {
				padding: 4px 8px;
				border: 1px solid #ddd;
				border-radius: 4px;
				font-size: 13px;
				font-family: monospace;
				margin: 0 8px;
			}

			.participant-id-input.extracted {
				background: #e8f5e9;
				border-color: #4caf50;
			}

			.participant-id-input.manual {
				background: #fff3e0;
				border-color: #ff9800;
			}

			.imported-badge {
				display: inline-block;
				margin-left: 8px;
				padding: 2px 6px;
				background: #ccc;
				color: #333;
				border-radius: 3px;
				font-size: 10px;
				font-weight: 600;
			}

			.review-row-complete {
				background: #e6f4ea;
			}

			tr.review-row-complete:hover {
				background: #d5f0de;
			}

			.show-in-folder-btn {
				padding: 4px 8px;
				background: #f0f0f0;
				border: 1px solid #ddd;
				border-radius: 4px;
				cursor: pointer;
				font-size: 16px;
				transition: background 0.2s;
			}

			.show-in-folder-btn:hover {
				background: #e0e0e0;
			}

			.show-in-folder-btn:active {
				background: #d0d0d0;
			}

			h3 {
				margin-bottom: 15px;
			}

			.messages-container {
				display: flex;
				height: 100%;
				overflow: hidden;
			}

			.message-sidebar {
				width: 320px;
				display: flex;
				flex-direction: column;
				border-right: 1px solid #ddd;
				background: #f7f8fa;
			}

			.message-sidebar-header {
				display: flex;
				align-items: center;
				justify-content: space-between;
				padding: 16px;
			}

			.message-sidebar-status {
				padding: 0 16px 12px;
				border-bottom: 1px solid #ddd;
			}

			.message-filters {
				display: flex;
				gap: 8px;
				padding: 0 16px 12px;
				border-bottom: 1px solid #ddd;
				flex-wrap: wrap;
			}

			.message-filter {
				padding: 6px 12px;
				background: white;
				border: 1px solid #ccc;
				border-radius: 16px;
				cursor: pointer;
				font-size: 12px;
				color: #555;
			}

			.message-filter.active {
				background: #0066cc;
				border-color: #0066cc;
				color: white;
			}

			.message-thread-list {
				flex: 1;
				overflow-y: auto;
				padding: 12px 0;
			}

			.message-thread-item {
				padding: 12px 16px;
				border-bottom: 1px solid #eee;
				cursor: pointer;
				display: flex;
				flex-direction: column;
				gap: 4px;
			}

			.message-thread-item:hover {
				background: #eef4ff;
			}

			.message-thread-item.active {
				background: #e5f1ff;
			}

			.message-thread-item.unread .message-thread-subject {
				font-weight: 600;
			}

			.message-thread-subject {
				display: flex;
				align-items: center;
				gap: 8px;
				font-size: 14px;
				color: #222;
			}

			.message-thread-meta {
				font-size: 11px;
				color: #666;
			}

			.message-thread-preview {
				font-size: 12px;
				color: #777;
				white-space: nowrap;
				overflow: hidden;
				text-overflow: ellipsis;
			}

			.message-thread-unread {
				padding: 2px 6px;
				background: #ff6b6b;
				color: white;
				font-size: 10px;
				border-radius: 999px;
			}

			.message-thread-project {
				font-size: 10px;
				background: #e8f1ff;
				color: #1a5dba;
				padding: 2px 6px;
				border-radius: 12px;
			}

			.message-content-wrapper {
				flex: 1;
				display: flex;
				flex-direction: column;
				overflow: hidden;
			}

			.messages-main {
				flex: 1;
				display: flex;
				flex-direction: column;
				min-height: 0;
				background: white;
			}

			.message-content-header {
				display: flex;
				justify-content: space-between;
				align-items: flex-start;
				padding: 16px 20px;
				border-bottom: 1px solid #eee;
			}

			.message-header-actions {
				display: flex;
				align-items: center;
				gap: 8px;
			}

			.message-content-body {
				display: flex;
				gap: 20px;
				flex: 1;
				min-height: 0;
				overflow: hidden;
				padding: 20px;
			}

			.message-bubble-actions {
				margin-top: 8px;
				display: flex;
				justify-content: flex-end;
			}

			.message-delete-btn {
				background: transparent;
				border: none;
				color: #666;
				font-size: 11px;
				cursor: pointer;
				padding: 0;
			}

			.message-delete-btn:hover {
				text-decoration: underline;
				color: #c0392b;
			}

			.message-bubble.outgoing .message-delete-btn {
				color: rgba(255, 255, 255, 0.85);
			}

			.message-bubble.outgoing .message-delete-btn:hover {
				color: #ffe0e0;
			}

			.message-thread-info h3 {
				margin: 0;
				font-size: 20px;
			}

			.message-thread-info p {
				margin: 4px 0 0 0;
				font-size: 12px;
				color: #666;
			}

			.message-syftbox-status {
				display: flex;
				align-items: center;
				gap: 8px;
			}

			.message-syftbox-status select {
				padding: 6px 12px;
				border: 1px solid #ccc;
				border-radius: 4px;
				font-size: 12px;
			}

			.status-online {
				background: #e6f4ea;
				color: #1e7d34;
				padding: 4px 10px;
				border-radius: 999px;
				font-size: 12px;
				font-weight: 600;
			}

			.status-offline {
				background: #fdecea;
				color: #b33a3a;
				padding: 4px 10px;
				border-radius: 999px;
				font-size: 12px;
				font-weight: 600;
			}

			.message-conversation {
				flex: 1;
				display: flex;
				flex-direction: column;
				gap: 12px;
				overflow-y: auto;
				padding-right: 8px;
			}

			.message-bubble {
				max-width: 70%;
				padding: 12px 16px;
				border-radius: 16px;
				box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
				background: #f5f5f5;
				align-self: flex-start;
			}

			.message-bubble.outgoing {
				background: #0066cc;
				color: white;
				align-self: flex-end;
			}

			.message-bubble-header {
				font-size: 11px;
				margin-bottom: 6px;
				opacity: 0.8;
			}

			.message-bubble-body {
				font-size: 13px;
				white-space: pre-wrap;
				word-break: break-word;
			}

			.message-project-panel {
				width: 260px;
				border-left: 1px solid #eee;
				padding-left: 20px;
				display: none;
				flex-direction: column;
				gap: 10px;
				font-size: 13px;
			}

			.message-project-panel h4 {
				margin: 0;
				font-size: 16px;
				color: #0066cc;
			}

			.message-compose {
				border-top: 1px solid #eee;
				display: flex;
				flex-direction: column;
				gap: 10px;
				padding: 16px 20px;
			}

			.message-compose-recipient {
				display: flex;
				align-items: center;
				gap: 10px;
			}

			#message-subject-wrapper {
				width: 100%;
			}

			.message-compose-recipient input,
			.message-compose textarea,
			.message-compose input[type='text'] {
				width: 100%;
				padding: 10px;
				border: 1px solid #ccc;
				border-radius: 6px;
				font-size: 13px;
			}

			.message-compose textarea {
				min-height: 120px;
				resize: vertical;
			}

			.message-compose-actions {
				display: flex;
				justify-content: flex-end;
				gap: 10px;
			}

			.message-cta {
				padding: 8px 16px;
				background: #0066cc;
				color: white;
				border: none;
				border-radius: 4px;
				cursor: pointer;
				font-size: 13px;
				font-weight: 600;
			}

			.message-secondary {
				padding: 6px 12px;
				background: #f1f1f1;
				color: #555;
				border: 1px solid #ccc;
				border-radius: 4px;
				cursor: pointer;
				font-size: 12px;
			}

			.message-secondary:hover {
				background: #e2e2e2;
			}

			.messages-empty-state {
				flex: 1;
				display: flex;
				flex-direction: column;
				align-items: center;
				justify-content: center;
				gap: 12px;
				color: #666;
			}

			.messages-warning {
				display: flex;
				align-items: center;
				justify-content: center;
				padding: 20px;
			}

			.messages-warning-card {
				background: #fff4e5;
				border: 1px solid #f7d4a9;
				border-radius: 10px;
				padding: 24px 32px;
				text-align: center;
				max-width: 420px;
				box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
			}

			.messages-warning-card h3 {
				margin-bottom: 12px;
				color: #b85c00;
			}

			.message-thread-list::-webkit-scrollbar,
			.message-conversation::-webkit-scrollbar {
				width: 6px;
			}

			.message-thread-list::-webkit-scrollbar-thumb,
			.message-conversation::-webkit-scrollbar-thumb {
				background: rgba(0, 0, 0, 0.2);
				border-radius: 4px;
			}

			@keyframes spin {
				0% {
					transform: rotate(0deg);
				}

				100% {
					transform: rotate(360deg);
				}
			}

			.spinner {
				display: inline-block;
				width: 14px;
				height: 14px;
				border: 2px solid rgba(255, 255, 255, 0.3);
				border-top: 2px solid white;
				border-radius: 50%;
				animation: spin 0.6s linear infinite;
				margin-right: 8px;
				vertical-align: middle;
			}

			button:disabled {
				opacity: 0.7;
				cursor: not-allowed;
			}

			.queue-spinner {
				width: 14px;
				height: 14px;
				border: 2px solid rgba(255, 255, 255, 0.35);
				border-top: 2px solid white;
				border-radius: 50%;
				animation: spin 0.6s linear infinite;
			}

			.table-search-input {
				padding: 6px 10px;
				border: 1px solid #ddd;
				border-radius: 4px;
				font-size: 13px;
				min-width: 200px;
			}

			.onboarding-view {
				display: flex;
				align-items: center;
				justify-content: center;
				flex: 1;
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			}

			.onboarding-card {
				background: white;
				border-radius: 12px;
				padding: 50px;
				max-width: 500px;
				box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
			}

			.onboarding-card h1 {
				color: #667eea;
				margin: 0 0 10px 0;
				font-size: 36px;
			}

			.onboarding-card p {
				color: #666;
				margin: 0 0 30px 0;
				font-size: 16px;
			}

			.onboarding-card input {
				width: 100%;
				padding: 12px;
				border: 2px solid #ddd;
				border-radius: 6px;
				font-size: 16px;
				margin-bottom: 20px;
			}

			.onboarding-card button {
				width: 100%;
				padding: 15px;
				background: #667eea;
				color: white;
				border: none;
				border-radius: 6px;
				font-size: 16px;
				font-weight: 600;
				cursor: pointer;
			}

			.onboarding-card button:hover {
				background: #5568d3;
			}

			.onboarding-skip-btn {
				width: auto !important;
				min-width: 0;
				padding: 8px 20px !important;
				display: inline-flex;
				align-items: center;
				justify-content: center;
				font-size: 14px;
				font-weight: 500;
				background: none;
				border: 1px solid #888;
				color: #888;
				border-radius: 6px;
				cursor: pointer;
				transition: all 0.2s;
			}

			.onboarding-skip-btn:hover {
				border-color: #666;
				color: #666;
			}

			.danger-zone {
				margin-top: 40px;
				padding: 20px;
				background: #fff5f5;
				border: 2px solid #feb2b2;
				border-radius: 8px;
			}

			.danger-zone h3 {
				color: #c53030;
				margin: 0 0 10px 0;
			}

			.danger-zone p {
				color: #742a2a;
				font-size: 13px;
				margin-bottom: 15px;
			}

			.danger-btn {
				background: #dc3545 !important;
			}

			.danger-btn:hover {
				background: #c82333 !important;
			}

			.syftbox-code-input:focus {
				outline: none;
				border-color: #667eea;
				box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
			}

			.syftbox-code-input.error {
				border-color: #dc3545;
				background-color: #fff5f5;
			}

			.syftbox-code-input.success {
				border-color: #28a745;
				background-color: #f0fff4;
			}
			.project-edit-container {
				display: flex;
				flex-direction: column;
				height: 100%;
			}

			.project-edit-header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				padding: 20px;
				border-bottom: 1px solid #ddd;
				gap: 20px;
			}

			.project-edit-header-left {
				display: flex;
				align-items: center;
				gap: 20px;
			}

			.project-edit-header-right {
				display: flex;
				gap: 10px;
				align-items: center;
			}

			#project-jupyter-status {
				font-size: 13px;
				color: #28a745;
			}

			.link-button {
				border: none;
				background: none;
				color: inherit;
				font: inherit;
				cursor: pointer;
				text-decoration: underline;
				padding: 0;
				margin-left: 6px;
			}

			.link-button:hover {
				opacity: 0.8;
			}

			.project-edit-path {
				display: flex;
				flex-direction: column;
				gap: 2px;
				max-width: 360px;
			}

			.ellipsis {
				display: block;
				white-space: nowrap;
				overflow: hidden;
				text-overflow: ellipsis;
				font-size: 13px;
			}

			.project-edit-main {
				display: flex;
				flex: 1;
				min-height: 0;
			}

			.project-edit-tree {
				width: 320px;
				padding: 20px;
				border-right: 1px solid #ddd;
				overflow-y: auto;
				background: #f8f9fb;
			}

			.project-file-tree {
				max-height: 100%;
				overflow-y: auto;
			}

			.project-file-tree details {
				margin-left: 12px;
			}

			.project-file-tree summary {
				list-style: none;
				display: flex;
				align-items: center;
				gap: 8px;
				padding: 4px 0;
				cursor: pointer;
				font-size: 13px;
			}

			.project-file-tree details > summary::before {
				content: '▶';
				font-size: 10px;
				display: inline-block;
				transform: rotate(0deg);
				transition: transform 0.2s ease;
				color: #555;
			}

			.project-file-tree details[open] > summary::before {
				transform: rotate(90deg);
			}

			.project-file-tree summary::-webkit-details-marker {
				display: none;
			}

			.project-file-tree .tree-leaf {
				display: flex;
				align-items: center;
				gap: 8px;
				padding: 4px 0;
				margin-left: 28px;
				font-size: 13px;
			}

			.project-edit-form {
				flex: 1;
				padding: 20px;
				overflow-y: auto;
				display: flex;
				flex-direction: column;
				gap: 18px;
			}

			.form-group label {
				display: block;
				font-weight: 600;
				margin-bottom: 8px;
			}

			.form-group input {
				width: 100%;
				padding: 10px;
				border: 1px solid #ddd;
				border-radius: 4px;
				font-size: 14px;
			}

			.primary-btn,
			.secondary-btn,
			.danger-btn {
				border: none;
				border-radius: 4px;
				padding: 10px 18px;
				cursor: pointer;
				font-size: 14px;
				font-weight: 500;
			}

			.primary-btn {
				background: #667eea;
				color: white;
			}

			.secondary-btn {
				background: #e2e6ea;
				color: #333;
			}

			.danger-btn {
				background: #dc3545;
				color: white;
			}

			.primary-btn:disabled,
			.secondary-btn:disabled,
			.danger-btn:disabled {
				opacity: 0.6;
				cursor: not-allowed;
			}

			.project-edit-actions {
				display: flex;
				justify-content: flex-end;
				gap: 10px;
				margin-top: 20px;
			}

			.project-edit-status {
				min-height: 18px;
				font-size: 12px;
				color: #666;
			}

			.project-card-actions {
				display: flex;
				gap: 10px;
			}

			.project-badge {
				display: inline-block;
				margin-left: 8px;
				padding: 2px 6px;
				border-radius: 4px;
				font-size: 11px;
				vertical-align: middle;
			}

			.project-badge-orphan {
				background: #ffe8cc;
				color: #8a4500;
				border: 1px solid #ffcd94;
			}

			.project-modal {
				background: white;
				border-radius: 12px;
				padding: 28px;
				width: min(520px, 92vw);
				box-shadow: 0 20px 50px rgba(0, 0, 0, 0.25);
			}

			.operation-modal-content {
				background: white;
				padding: 24px 32px;
				border-radius: 12px;
				min-width: 280px;
				max-width: 420px;
				box-shadow: 0 18px 40px rgba(0, 0, 0, 0.18);
				display: flex;
				flex-direction: column;
				align-items: center;
				gap: 12px;
			}

			.operation-modal-text {
				text-align: center;
				font-size: 14px;
				color: #333;
				white-space: pre-line;
			}

			.project-path-input {
				display: flex;
				gap: 8px;
				align-items: center;
			}

			.project-path-input input {
				flex: 1;
				padding: 10px;
				border: 1px solid #ddd;
				border-radius: 4px;
				font-size: 14px;
				background: #f8f9fb;
			}

			.project-modal-actions {
				display: flex;
				justify-content: flex-end;
				gap: 10px;
				margin-top: 24px;
			}
		</style>
	</head>

	<body>
		<div id="onboarding-view" class="tab-content" style="display: none">
			<div class="onboarding-view">
				<div class="onboarding-card" style="max-width: 700px">
					<!-- Step 1: Welcome -->
					<div id="onboarding-step-1" class="onboarding-step" style="display: block">
						<h1>Welcome to BioVault</h1>
						<p>Let's get your system setup.</p>
						<button id="onboarding-next-1" style="margin-top: 20px">Next →</button>
					</div>

					<!-- Step 2: Dependencies -->
					<div id="onboarding-step-2" class="onboarding-step" style="display: none">
						<div
							style="
								display: flex;
								justify-content: space-between;
								align-items: center;
								margin-bottom: 20px;
							"
						>
							<h1 style="font-size: 28px; margin: 0">Configure Your System</h1>
							<button id="skip-dependencies-btn" class="onboarding-skip-btn">Skip</button>
						</div>
						<p style="margin-bottom: 20px; font-size: 14px; color: #666">
							BioVault requires the following dependencies. You can ask BioVault to attempt
							installation for you or manually install the missing dependencies yourself and click
							'Check Again' after.
						</p>

						<!-- Two-panel layout -->
						<div style="display: flex; gap: 15px; margin-bottom: 20px; height: 350px">
							<!-- Left panel: Dependencies list -->
							<div
								id="deps-list"
								style="
									flex: 0 0 220px;
									background: #f8f9fa;
									padding: 15px;
									border-radius: 8px;
									overflow-y: auto;
								"
							>
								<!-- Dependencies will be populated here -->
								<div style="text-align: center; color: #999; padding: 20px">
									<div class="spinner" style="width: 24px; height: 24px; margin: 0 auto 15px"></div>
									<p>Checking...</p>
								</div>
							</div>

							<!-- Right panel: Dependency details -->
							<div
								id="dep-details-panel"
								style="
									flex: 1;
									background: #fff;
									border: 2px solid #0066cc;
									border-radius: 8px;
									padding: 20px;
									overflow-y: auto;
								"
							>
								<div style="text-align: center; color: #999; padding: 40px 20px">
									<p>← Click on a dependency to view details</p>
								</div>
							</div>
						</div>

						<!-- Button layout: All buttons in one line -->
						<div
							style="display: flex; justify-content: space-between; align-items: center; gap: 15px"
						>
							<!-- Left side buttons -->
							<div style="display: flex; gap: 10px">
								<button
									id="check-again-btn"
									style="
										background: #17a2b8;
										padding: 12px 22px;
										font-size: 14px;
										font-weight: 500;
										height: 44px;
									"
								>
									Check Again
								</button>
								<button
									id="install-missing-deps-btn"
									disabled
									style="
										background: #28a745;
										padding: 12px 22px;
										font-size: 14px;
										font-weight: 500;
										height: 44px;
										white-space: nowrap;
									"
								>
									Install Missing
								</button>
							</div>

							<!-- Right side: Next button -->
							<div>
								<button
									id="onboarding-next-2"
									disabled
									style="
										padding: 12px 28px;
										background: #667eea;
										font-size: 14px;
										font-weight: 500;
										height: 44px;
									"
								>
									Next →
								</button>
							</div>
						</div>
					</div>

					<!-- Step 3: Email -->
					<div id="onboarding-step-3" class="onboarding-step" style="display: none">
						<h1 style="font-size: 28px">Enter Your Email</h1>
						<p style="margin-bottom: 25px">This will be used to identify your BioVault instance.</p>
						<input
							type="email"
							id="onboarding-email"
							placeholder="your.email@example.com"
							autocapitalize="off"
						/>
						<div
							id="email-validation-message"
							style="margin-top: 8px; font-size: 12px; min-height: 16px"
						></div>
						<div style="display: flex; gap: 10px; margin-top: 20px">
							<button id="onboarding-back-3" style="background: #6c757d">← Back</button>
							<button id="onboarding-next-3" style="flex: 1; white-space: nowrap">Next →</button>
						</div>
					</div>

					<!-- Step 4: SyftBox OTP Authentication (Optional) -->
					<div id="onboarding-step-4" class="onboarding-step" style="display: none">
						<div
							style="
								display: flex;
								justify-content: space-between;
								align-items: center;
								margin-bottom: 20px;
							"
						>
							<h1 style="font-size: 28px; margin: 0">SyftBox Authentication</h1>
							<button id="skip-syftbox-btn" class="onboarding-skip-btn">Skip</button>
						</div>
						<!-- Initial state: overview -->
						<div id="syftbox-send-state" style="display: block">
							<div
								style="
									background: linear-gradient(
										135deg,
										rgba(102, 126, 234, 0.18),
										rgba(118, 75, 162, 0.18)
									);
									padding: 24px;
									border-radius: 20px;
									display: flex;
									justify-content: center;
									align-items: center;
									margin-bottom: 24px;
								"
							>
								<img
									src="assets/bv-syftbox.png"
									alt="BioVault + SyftBox"
									style="max-width: 100%; height: auto; display: block"
								/>
							</div>
							<div style="color: #555; font-size: 15px; line-height: 1.5; margin-bottom: 24px">
								<p style="margin-bottom: 16px">
									<strong>BioVault uses SyftBox for its secure networking capability.</strong>
									Using SyftBox is optional; however, if you want to collaborate with other
									BioVaults it's highly recommended.
								</p>
								<p style="margin-bottom: 16px">
									It's completely free and open source - just verify your email to get started.
								</p>
								<p style="margin: 0">
									To read more about SyftBox please visit:
									<a
										href="#"
										class="syftbox-link"
										data-url="https://syftbox.net"
										style="color: #0066cc; text-decoration: none; font-weight: 600"
										>https://syftbox.net</a
									>
								</p>
							</div>
							<div style="display: flex; justify-content: flex-end">
								<button
									id="syftbox-info-continue-btn"
									style="
										padding: 12px 28px;
										background: #667eea;
										color: white;
										border: none;
										border-radius: 6px;
										font-size: 15px;
										font-weight: 600;
										cursor: pointer;
									"
								>
									Authenticate SyftBox
								</button>
							</div>
						</div>

						<!-- Email walkthrough before sending code -->
						<div id="syftbox-email-info" style="display: none">
							<p style="color: #555; font-size: 15px; line-height: 1.5; margin-bottom: 16px">
								We'll send a one-time passcode to
								<strong><span id="syftbox-email-preview-address">your email</span></strong
								>. You'll use this code on the next screen to finish linking SyftBox.
							</p>
							<div
								id="syftbox-email-scroll"
								style="max-height: 55vh; overflow-y: auto; padding-right: 4px; margin-bottom: 16px"
							>
								<p
									style="
										color: #666;
										font-size: 13px;
										margin-bottom: 12px;
										text-align: center;
										font-weight: 600;
									"
								>
									Example Email
								</p>
								<div
									style="
										background: linear-gradient(
											135deg,
											rgba(102, 126, 234, 0.12),
											rgba(118, 75, 162, 0.12)
										);
										padding: 18px;
										border-radius: 18px;
										display: flex;
										justify-content: center;
									"
								>
									<img
										src="assets/syftbox-email.png"
										alt="SyftBox email preview"
										style="width: 100%; max-height: 500px; object-fit: contain; display: block"
									/>
								</div>
							</div>
							<p style="color: #666; font-size: 13px; margin-bottom: 24px">
								Don't close the app - just open your inbox once you click continue, and then enter
								the 8-digit code.
							</p>
							<div style="display: flex; gap: 10px; justify-content: flex-end">
								<button
									id="syftbox-email-back-btn"
									style="
										padding: 12px 22px;
										background: none;
										border: 1px solid #ccc;
										border-radius: 6px;
										color: #555;
										font-size: 14px;
										font-weight: 500;
										cursor: pointer;
									"
								>
									Back
								</button>
								<button
									id="send-login-code-btn"
									style="
										padding: 12px 28px;
										background: #667eea;
										color: white;
										border: none;
										border-radius: 6px;
										font-size: 15px;
										font-weight: 600;
										cursor: pointer;
									"
								>
									Send Code
								</button>
							</div>
						</div>

						<!-- OTP Input state -->
						<div id="syftbox-otp-state" style="display: none">
							<div style="text-align: center; margin-bottom: 20px">
								<div
									style="
										display: flex;
										align-items: center;
										justify-content: center;
										color: #666;
										margin-bottom: 10px;
									"
								>
									<svg
										style="width: 20px; height: 20px; margin-right: 8px; fill: #28a745"
										viewBox="0 0 20 20"
									>
										<path
											d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"
										/>
										<path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z" />
									</svg>
									<span id="syftbox-user-email"></span>
								</div>
								<p style="color: #666; font-size: 14px">Enter the 8-digit code we emailed to you</p>
							</div>

							<!-- 8-digit code input -->
							<div style="display: flex; justify-content: center; gap: 8px; margin-bottom: 20px">
								<input
									type="text"
									class="syftbox-code-input"
									maxlength="1"
									data-index="0"
									style="
										width: 44px;
										height: 50px;
										text-align: center;
										border: 2px solid #ddd;
										border-radius: 8px;
										font-size: 20px;
										font-weight: 600;
										transition: all 0.2s;
									"
								/>
								<input
									type="text"
									class="syftbox-code-input"
									maxlength="1"
									data-index="1"
									style="
										width: 44px;
										height: 50px;
										text-align: center;
										border: 2px solid #ddd;
										border-radius: 8px;
										font-size: 20px;
										font-weight: 600;
										transition: all 0.2s;
									"
								/>
								<input
									type="text"
									class="syftbox-code-input"
									maxlength="1"
									data-index="2"
									style="
										width: 44px;
										height: 50px;
										text-align: center;
										border: 2px solid #ddd;
										border-radius: 8px;
										font-size: 20px;
										font-weight: 600;
										transition: all 0.2s;
									"
								/>
								<input
									type="text"
									class="syftbox-code-input"
									maxlength="1"
									data-index="3"
									style="
										width: 44px;
										height: 50px;
										text-align: center;
										border: 2px solid #ddd;
										border-radius: 8px;
										font-size: 20px;
										font-weight: 600;
										transition: all 0.2s;
									"
								/>
								<input
									type="text"
									class="syftbox-code-input"
									maxlength="1"
									data-index="4"
									style="
										width: 44px;
										height: 50px;
										text-align: center;
										border: 2px solid #ddd;
										border-radius: 8px;
										font-size: 20px;
										font-weight: 600;
										transition: all 0.2s;
									"
								/>
								<input
									type="text"
									class="syftbox-code-input"
									maxlength="1"
									data-index="5"
									style="
										width: 44px;
										height: 50px;
										text-align: center;
										border: 2px solid #ddd;
										border-radius: 8px;
										font-size: 20px;
										font-weight: 600;
										transition: all 0.2s;
									"
								/>
								<input
									type="text"
									class="syftbox-code-input"
									maxlength="1"
									data-index="6"
									style="
										width: 44px;
										height: 50px;
										text-align: center;
										border: 2px solid #ddd;
										border-radius: 8px;
										font-size: 20px;
										font-weight: 600;
										transition: all 0.2s;
									"
								/>
								<input
									type="text"
									class="syftbox-code-input"
									maxlength="1"
									data-index="7"
									style="
										width: 44px;
										height: 50px;
										text-align: center;
										border: 2px solid #ddd;
										border-radius: 8px;
										font-size: 20px;
										font-weight: 600;
										transition: all 0.2s;
									"
								/>
							</div>

							<!-- Error Message -->
							<div
								id="syftbox-error-message"
								style="
									display: none;
									color: #dc3545;
									text-align: center;
									margin-bottom: 15px;
									font-size: 14px;
									font-weight: 500;
								"
							>
								Invalid verification code. Please try again.
							</div>

							<!-- Verify Button -->
							<button
								id="verify-code-btn"
								style="
									width: 100%;
									padding: 15px;
									background: #667eea;
									color: white;
									border: none;
									border-radius: 6px;
									font-size: 16px;
									font-weight: 600;
									cursor: pointer;
									margin-bottom: 15px;
								"
								disabled
							>
								Verify Code
							</button>

							<!-- Resend Code -->
							<div style="text-align: center">
								<p style="font-size: 13px; color: #666; margin-bottom: 8px">
									Didn't receive the code?
								</p>
								<button
									id="resend-code-btn"
									style="
										background: none;
										border: none;
										color: #667eea;
										font-size: 14px;
										font-weight: 500;
										cursor: pointer;
										text-decoration: underline;
									"
								>
									Send Again
								</button>
							</div>
						</div>
					</div>

					<!-- Step 5: Initializing -->
					<div id="onboarding-step-5" class="onboarding-step" style="display: none">
						<h1 style="font-size: 28px">Initializing BioVault...</h1>
						<div id="init-status" style="margin: 30px 0; text-align: center">
							<div class="spinner" style="width: 40px; height: 40px; margin: 0 auto 20px"></div>
							<p style="color: #666">Please wait...</p>
						</div>
						<div
							id="init-log"
							style="
								background: #1e1e1e;
								color: #d4d4d4;
								font-family: 'Courier New', monospace;
								font-size: 12px;
								padding: 15px;
								border-radius: 4px;
								max-height: 300px;
								overflow-y: auto;
								white-space: pre-wrap;
								display: none;
								margin-top: 20px;
							"
						></div>
					</div>
				</div>
			</div>

			<!-- Installation Progress Modal -->
			<div
				id="install-modal"
				style="
					display: none;
					position: fixed;
					top: 0;
					left: 0;
					right: 0;
					bottom: 0;
					background: rgba(0, 0, 0, 0.7);
					z-index: 9999;
					align-items: center;
					justify-content: center;
				"
			>
				<div
					style="
						background: white;
						border-radius: 12px;
						padding: 30px;
						max-width: 600px;
						width: 90%;
					"
				>
					<h2 style="margin: 0 0 20px 0; color: #667eea">Installing Dependencies</h2>
					<div id="install-progress" style="margin-bottom: 15px">
						<div style="background: #e0e0e0; border-radius: 4px; height: 8px; overflow: hidden">
							<div
								id="install-progress-bar"
								style="width: 0%; background: #28a745; height: 100%; transition: width 0.3s"
							></div>
						</div>
						<p id="install-status-text" style="font-size: 14px; color: #666; margin-top: 8px">
							Preparing...
						</p>
					</div>
					<div
						id="install-log"
						style="
							background: #1e1e1e;
							color: #d4d4d4;
							font-family: 'Courier New', monospace;
							font-size: 11px;
							padding: 12px;
							border-radius: 4px;
							max-height: 250px;
							overflow-y: auto;
							white-space: pre-wrap;
							margin-bottom: 15px;
						"
					></div>
					<button id="install-close-btn" disabled style="width: 100%; background: #6c757d">
						Close
					</button>
				</div>
			</div>
		</div>

		<div class="tabs">
			<button class="tab active" data-tab="home">Home</button>
			<button class="tab" data-tab="projects">Projects</button>
			<button class="tab" data-tab="run">Run</button>
			<button class="tab" data-tab="runs">Results</button>
			<button class="tab" data-tab="messages">Messages</button>
			<button class="tab" data-tab="import">Import Data</button>
			<button class="tab" data-tab="participants">Participants</button>
			<button class="tab" data-tab="files">Files</button>
			<button class="tab" data-tab="logs">Logs</button>
			<button class="tab" data-tab="settings">Settings</button>
		</div>

		<div id="home-view" class="tab-content active">
			<div class="home-content">
				<h1>BioVault</h1>
				<p>Secure participant data management</p>
				<div class="home-buttons">
					<button class="home-btn" data-nav="projects">Projects</button>
					<button class="home-btn" data-nav="import">Import Files</button>
					<button class="home-btn" data-nav="participants">View Participants</button>
					<button class="home-btn" data-nav="files">View Files</button>
				</div>
			</div>
		</div>

		<div id="projects-view" class="tab-content">
			<div class="import-project-section">
				<h3>Projects</h3>
				<div style="display: flex; gap: 10px; margin-bottom: 15px">
					<button id="create-project-btn" style="background: #28a745">+ Create New Project</button>
				</div>
				<div style="margin-top: 15px">
					<h4 style="margin-bottom: 10px">Or Import Project from URL</h4>
					<div style="display: flex; gap: 10px">
						<input
							type="text"
							id="project-url-input"
							placeholder="Paste GitHub URL to project.yaml (e.g., https://github.com/OpenMined/biovault/blob/main/cli/examples/apol1-sheet/project.yaml)"
							style="flex: 1"
						/>
						<button id="import-project-btn">Import</button>
					</div>
				</div>
			</div>
			<div class="projects-list" id="projects-list">
				<p style="color: #666">No projects imported yet.</p>
			</div>
		</div>

		<!-- Create Project Modal -->
		<div
			id="create-project-modal"
			style="
				display: none;
				position: fixed;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background: rgba(0, 0, 0, 0.6);
				z-index: 10000;
				align-items: center;
				justify-content: center;
			"
		>
			<div class="project-modal">
				<h2 style="margin: 0 0 20px; color: #667eea">Create New Project</h2>

				<div class="form-group">
					<label for="new-project-name">Project Name</label>
					<input
						type="text"
						id="new-project-name"
						placeholder="my-project"
						autocapitalize="none"
						autocorrect="off"
						spellcheck="false"
					/>
				</div>

				<div class="form-group">
					<label for="new-project-template">Template (Optional)</label>
					<select id="new-project-template">
						<option value="">Blank Project</option>
						<!-- Options loaded dynamically from biovault submodule examples -->
					</select>
				</div>

				<div class="form-group">
					<label for="new-project-path">Destination Folder</label>
					<div class="project-path-input">
						<input type="text" id="new-project-path" readonly />
						<button id="project-path-browse-btn" class="secondary-btn" type="button">
							Browse…
						</button>
						<button id="project-path-reset-btn" class="secondary-btn" type="button">
							Use Default
						</button>
					</div>
					<p style="font-size: 12px; color: #666; margin-top: 6px">
						Defaults to BioVault projects (BIOVAULT_HOME/projects/&lt;name&gt;). Choose a different
						location if you prefer.
					</p>
				</div>

				<div class="project-modal-actions">
					<button id="create-project-cancel" class="secondary-btn" type="button">Cancel</button>
					<button id="create-project-confirm" class="primary-btn" type="button">
						Create Project
					</button>
				</div>
			</div>
		</div>

		<div
			id="operation-modal"
			style="
				display: none;
				position: fixed;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background: rgba(0, 0, 0, 0.55);
				z-index: 12000;
				align-items: center;
				justify-content: center;
			"
		>
			<div class="operation-modal-content">
				<div class="spinner" style="width: 32px; height: 32px; margin-bottom: 16px"></div>
				<p id="operation-modal-text" class="operation-modal-text">Working...</p>
			</div>
		</div>

		<div id="project-edit-view" class="tab-content">
			<div class="project-edit-container">
				<div class="project-edit-header">
					<div class="project-edit-header-left">
						<button id="project-edit-back-btn" class="secondary-btn">← Back to Projects</button>
						<div class="project-edit-path">
							<span style="color: #666; font-size: 12px">Project folder</span>
							<span id="project-edit-path" class="ellipsis"></span>
						</div>
					</div>
					<div class="project-edit-header-right">
						<div
							id="project-jupyter-status"
							style="display: none; text-align: right; margin-right: 12px"
						></div>
						<button id="project-edit-reset-jupyter-btn" class="danger-btn">Reset Jupyter</button>
						<button id="project-edit-launch-jupyter-btn" class="primary-btn">Launch Jupyter</button>
					</div>
				</div>
				<div class="project-edit-main">
					<div class="project-edit-tree">
						<div style="margin-bottom: 12px">
							<h4 style="margin-bottom: 4px">Assets</h4>
							<p style="font-size: 12px; color: #666">
								Check the files that belong to this project.
							</p>
						</div>
						<div id="project-file-tree" class="project-file-tree">
							<p style="color: #666; font-size: 13px">Select a project to view files.</p>
						</div>
					</div>
					<div class="project-edit-form">
						<div class="form-group">
							<label for="project-edit-name">Project Name</label>
							<input type="text" id="project-edit-name" placeholder="Project name" />
						</div>
						<div class="form-group">
							<label for="project-edit-author">Author</label>
							<input type="text" id="project-edit-author" placeholder="user@example.com" />
						</div>
						<div class="form-group">
							<label for="project-edit-workflow">Workflow</label>
							<input type="text" id="project-edit-workflow" placeholder="workflow.nf" />
						</div>
						<div class="form-group">
							<label for="project-edit-template">Template</label>
							<input
								type="text"
								id="project-edit-template"
								placeholder="template name (optional)"
							/>
							<p style="font-size: 12px; color: #666; margin-top: 6px">
								Leave blank to remove the template value.
							</p>
						</div>
						<div class="project-edit-actions">
							<button id="project-edit-cancel-btn" class="secondary-btn">Cancel</button>
							<button id="project-edit-save-btn" class="primary-btn">Save Project</button>
						</div>
						<div id="project-edit-status" class="project-edit-status"></div>
					</div>
				</div>
			</div>
		</div>

		<div id="run-view" class="tab-content">
			<div class="run-container">
				<div class="selection-panel">
					<div
						style="
							display: flex;
							justify-content: space-between;
							align-items: center;
							margin-bottom: 15px;
						"
					>
						<h3 style="margin: 0">Select Participants</h3>
						<label style="cursor: pointer; font-size: 14px">
							<input type="checkbox" id="select-all-participants" style="margin-right: 5px" />
							Select All
						</label>
					</div>
					<div class="selection-list" id="run-participants-list"></div>
				</div>
				<div class="selection-panel">
					<h3>Select Project</h3>
					<div class="selection-list" id="run-projects-list"></div>
					<button class="run-btn" id="run-btn" disabled>Run Analysis</button>
				</div>
			</div>
		</div>

		<div id="import-view" class="tab-content">
			<div class="container">
				<div class="left-panel">
					<h3>Select Folder</h3>
					<div style="display: flex; gap: 10px">
						<button id="pick-folder">Pick Folder</button>
						<button
							id="reset-import-btn"
							style="
								padding: 8px 16px;
								background: #6c757d;
								color: white;
								border: none;
								border-radius: 4px;
								cursor: pointer;
							"
						>
							Reset
						</button>
					</div>
					<div class="path-display" id="selected-path">No folder selected</div>

					<h3 style="margin-top: 20px">File Type</h3>
					<select id="file-type-select" multiple size="5" style="width: 100%">
						<option value="">Select file type(s)...</option>
					</select>

					<div id="custom-extension" style="display: none; margin-top: 10px">
						<input
							type="text"
							id="custom-ext-input"
							placeholder="e.g., *.txt or .csv"
							style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px"
						/>
					</div>
				</div>
				<div class="right-panel">
					<div class="pattern-section">
						<div class="pattern-section-header">
							<h3>ID Pattern Detection</h3>
							<div class="pattern-info-wrapper">
								<button
									type="button"
									class="pattern-info-btn"
									id="pattern-info-btn"
									aria-label="How ID patterns work"
									aria-expanded="false"
								>
									?
								</button>
								<div class="pattern-help" id="pattern-help">
									<strong>ID Pattern Tips</strong>
									<p>
										Use macros like <code>{parent:{id}}</code> to pull IDs from folders, or regex
										with a named <code>id</code> group such as
										<code>.*/(?P&lt;id&gt;hu[A-Za-z0-9]{6})/[^/]+$</code>.
									</p>
									<ul>
										<li><code>{parent:{id}}</code> → parent folder becomes the ID</li>
										<li>
											<code>{stem:{id}_*}</code> → capture leading digits before an underscore
										</li>
										<li>
											Regex must include <code>(?P&lt;id&gt;…)</code> or another capturing group
										</li>
									</ul>
								</div>
							</div>
						</div>
						<div class="pattern-suggestions" id="pattern-suggestions"></div>
						<div class="pattern-input-row">
							<input
								type="text"
								id="custom-pattern"
								class="pattern-input"
								placeholder="Enter macro (e.g., {parent:hu{id}}) or regex with (?P&lt;id&gt;)"
							/>
						</div>
						<div class="pattern-hint">
							Applied patterns populate the participant column automatically. Tweak the pattern
							above or paste your own.
						</div>
					</div>

					<div class="file-list-container">
						<h3>
							<label style="display: inline-flex; align-items: center; gap: 8px">
								<input type="checkbox" id="select-all-files" />
								Files Found (<span id="file-count">0</span>) | Selected (<span id="selected-count"
									>0</span
								>)
							</label>
						</h3>
						<div class="file-list-header">
							<div class="col-checkbox"></div>
							<div class="col-path" data-sort="path">
								Path <span class="sort-indicator"></span>
								<div class="column-resizer" data-col="path"></div>
							</div>
							<div class="col-filename" data-sort="filename">
								Filename <span class="sort-indicator"></span>
								<div class="column-resizer" data-col="filename"></div>
							</div>
							<div class="col-extension" data-sort="extension">
								Ext <span class="sort-indicator"></span>
							</div>
							<div class="col-participant" data-sort="participant">
								Participant <span class="sort-indicator"></span>
								<div class="column-resizer" data-col="participant"></div>
							</div>
							<div class="col-actions"></div>
						</div>
						<ul class="file-list" id="file-list"></ul>
					</div>
				</div>
			</div>
			<div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px">
				<button class="import-button" id="import-btn" disabled>Next →</button>
			</div>
		</div>

		<div id="participants-view" class="tab-content">
			<div class="table-container">
				<div
					style="
						display: flex;
						justify-content: space-between;
						align-items: center;
						margin-bottom: 20px;
					"
				>
					<h2 style="margin: 0">Participants (<span id="participant-count">0</span>)</h2>
					<div style="display: flex; gap: 10px; align-items: center">
						<input
							type="text"
							id="participants-search"
							class="table-search-input"
							placeholder="Search participants..."
						/>
						<button
							id="delete-selected-participants-btn"
							style="
								padding: 8px 16px;
								background: #dc3545;
								color: white;
								border: none;
								border-radius: 4px;
								cursor: pointer;
								display: none;
							"
						>
							Delete Selected
						</button>
					</div>
				</div>
				<table>
					<thead>
						<tr>
							<th style="width: 40px">
								<input type="checkbox" id="select-all-participants-table" />
							</th>
							<th>ID</th>
							<th>Participant ID</th>
							<th>Created At</th>
						</tr>
					</thead>
					<tbody id="participants-table"></tbody>
				</table>
			</div>
		</div>

		<div id="files-view" class="tab-content">
			<div class="table-container">
				<!-- File Type Sub-tabs -->
				<div style="display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid #ddd">
					<button
						class="file-type-tab active"
						data-type="Genotype"
						style="
							padding: 10px 20px;
							background: none;
							border: none;
							border-bottom: 3px solid #007bff;
							cursor: pointer;
							font-size: 14px;
							font-weight: 500;
							color: #007bff;
						"
					>
						Genotype
					</button>
					<button
						class="file-type-tab"
						data-type="Unknown"
						style="
							padding: 10px 20px;
							background: none;
							border: none;
							border-bottom: 3px solid transparent;
							cursor: pointer;
							font-size: 14px;
							font-weight: 500;
							color: #666;
						"
					>
						Unknown
					</button>
				</div>

				<div
					style="
						display: flex;
						justify-content: space-between;
						align-items: center;
						margin-bottom: 20px;
					"
				>
					<h2 style="margin: 0">Files (<span id="files-count">0</span>)</h2>
					<div style="display: flex; gap: 10px; align-items: center">
						<input
							type="text"
							id="files-search"
							class="table-search-input"
							placeholder="Search files..."
						/>
						<button
							id="process-queue-btn"
							style="
								padding: 8px 16px;
								background: #28a745;
								color: white;
								border: none;
								border-radius: 4px;
								cursor: pointer;
								display: flex;
								align-items: center;
								gap: 6px;
							"
						>
							<span id="queue-btn-icon">⏸</span>
							<span id="queue-btn-text">Pause Queue</span>
							<span id="queue-spinner" class="queue-spinner" style="display: none"></span>
							(<span id="pending-count">0</span>)
						</button>
						<button
							id="delete-selected-files-btn"
							style="
								padding: 8px 16px;
								background: #dc3545;
								color: white;
								border: none;
								border-radius: 4px;
								cursor: pointer;
								display: none;
							"
						>
							Delete Selected
						</button>
					</div>
				</div>
				<table>
					<thead>
						<tr>
							<th style="width: 40px"><input type="checkbox" id="select-all-files-table" /></th>
							<th class="sortable-files-header" data-sort-field="id">
								ID <span class="sort-indicator"></span>
							</th>
							<th class="sortable-files-header" data-sort-field="status">
								Status <span class="sort-indicator"></span>
							</th>
							<th class="sortable-files-header" data-sort-field="participant">
								Participant ID <span class="sort-indicator"></span>
							</th>
							<th class="sortable-files-header" data-sort-field="file_path">
								File Path <span class="sort-indicator"></span>
							</th>
							<th class="sortable-files-header" data-sort-field="data_type">
								Data Type <span class="sort-indicator"></span>
							</th>
							<th class="sortable-files-header" data-sort-field="source">
								Source <span class="sort-indicator"></span>
							</th>
							<th class="sortable-files-header" data-sort-field="grch_version">
								GRCh <span class="sort-indicator"></span>
							</th>
							<th class="sortable-files-header" data-sort-field="row_count">
								Rows <span class="sort-indicator"></span>
							</th>
							<th class="sortable-files-header" data-sort-field="chromosome_count">
								Chromosomes <span class="sort-indicator"></span>
							</th>
							<th class="sortable-files-header" data-sort-field="inferred_sex">
								Sex <span class="sort-indicator"></span>
							</th>
							<th class="sortable-files-header" data-sort-field="file_hash">
								Hash <span class="sort-indicator"></span>
							</th>
							<th class="sortable-files-header" data-sort-field="created_at">
								Created At <span class="sort-indicator"></span>
							</th>
							<th class="sortable-files-header" data-sort-field="updated_at">
								Updated At <span class="sort-indicator"></span>
							</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody id="files-table"></tbody>
				</table>
			</div>
		</div>

		<div id="runs-view" class="tab-content">
			<div
				style="padding: 20px; overflow-y: auto; height: 100%; display: flex; flex-direction: column"
			>
				<h2 style="margin-bottom: 20px">Analysis Results</h2>
				<div id="runs-list" style="flex: 1; overflow-y: auto"></div>
				<div
					id="log-viewer"
					style="
						display: none;
						margin-top: 20px;
						border-top: 2px solid #ddd;
						padding-top: 20px;
						flex-shrink: 0;
					"
				>
					<div
						style="
							display: flex;
							justify-content: space-between;
							align-items: center;
							margin-bottom: 10px;
						"
					>
						<h3 style="margin: 0">
							Live Logs <span id="log-run-name" style="font-size: 14px; color: #666"></span>
						</h3>
						<div style="display: flex; gap: 10px">
							<button
								id="share-logs-btn"
								style="
									padding: 6px 12px;
									background: #17a2b8;
									color: white;
									border: none;
									border-radius: 4px;
									cursor: pointer;
									display: none;
								"
							>
								Share Log File
							</button>
							<button
								id="close-logs-btn"
								style="
									padding: 6px 12px;
									background: #6c757d;
									color: white;
									border: none;
									border-radius: 4px;
									cursor: pointer;
								"
							>
								Close
							</button>
						</div>
					</div>
					<pre
						id="log-content"
						style="
							background: #1e1e1e;
							color: #d4d4d4;
							padding: 15px;
							border-radius: 4px;
							overflow-y: auto;
							height: 500px;
							font-family: 'Courier New', monospace;
							font-size: 12px;
							margin: 0;
						"
					></pre>
				</div>
			</div>
		</div>

		<div id="messages-view" class="tab-content">
			<div id="messages-syftbox-warning" class="messages-warning" style="display: none">
				<div class="messages-warning-card">
					<h3>SyftBox Authorization Required</h3>
					<p>You need to authorize SyftBox before messaging is available.</p>
					<button id="messages-auth-btn" class="message-cta">Authorize SyftBox</button>
				</div>
			</div>
			<div class="messages-container">
				<div class="message-sidebar">
					<div class="message-sidebar-header">
						<h3>Conversations</h3>
						<button id="new-message-btn" class="message-cta">New Message</button>
					</div>
					<div class="message-sidebar-status">
						<div class="message-syftbox-status">
							<span id="message-syftbox-indicator" class="status-offline">Offline</span>
							<select id="message-syftbox-dropdown">
								<option value="online">Go Online</option>
								<option value="offline">Go Offline</option>
							</select>
						</div>
					</div>
					<div class="message-filters">
						<button class="message-filter active" data-filter="inbox">Inbox</button>
						<button class="message-filter" data-filter="sent">Sent</button>
						<button class="message-filter" data-filter="all">All</button>
						<button id="refresh-messages-btn" class="message-secondary">Refresh</button>
					</div>
					<div id="message-thread-list" class="message-thread-list"></div>
				</div>
				<div class="message-content-wrapper">
					<div id="messages-main" class="messages-main" style="display: none">
						<div class="message-content-header">
							<div class="message-thread-info">
								<h3 id="message-thread-subject">(No thread selected)</h3>
								<p id="message-thread-participants"></p>
							</div>
							<div class="message-header-actions">
								<button id="delete-thread-btn" class="message-secondary" style="display: none">
									Delete Thread
								</button>
							</div>
						</div>
						<div class="message-content-body">
							<div id="message-conversation" class="message-conversation"></div>
							<div id="message-project-panel" class="message-project-panel" style="display: none">
								<h4>Linked Project</h4>
								<div id="message-project-details"></div>
								<button id="message-view-project-btn" class="message-secondary">
									View in Projects
								</button>
							</div>
						</div>
						<div class="message-compose">
							<div class="message-compose-recipient">
								<label for="message-recipient-input">To:</label>
								<input id="message-recipient-input" type="text" placeholder="email@example.com" />
							</div>
							<div id="message-subject-wrapper">
								<input id="message-compose-subject" type="text" placeholder="Subject (optional)" />
							</div>
							<textarea id="message-compose-body" placeholder="Type your message..."></textarea>
							<div class="message-compose-actions">
								<button id="message-send-btn" class="message-cta">Send</button>
							</div>
						</div>
					</div>
					<div id="messages-empty-state" class="messages-empty-state" style="display: none">
						<p>Select a conversation or compose a new message to get started.</p>
						<button id="empty-start-message-btn" class="message-cta">New Message</button>
					</div>
				</div>
			</div>
		</div>

		<div id="import-review-view" class="tab-content">
			<div
				style="padding: 20px; display: flex; flex-direction: column; height: 100%; overflow: hidden"
			>
				<h2 style="margin-bottom: 20px">
					Review File Types (<span id="review-file-count">0</span> files)
				</h2>

				<div
					style="display: flex; gap: 20px; margin-bottom: 20px; align-items: center; flex-shrink: 0"
				>
					<div style="display: flex; gap: 10px">
						<button
							id="detect-types-btn"
							style="
								padding: 10px 20px;
								background: #28a745;
								color: white;
								border: none;
								border-radius: 4px;
								cursor: pointer;
								font-size: 14px;
							"
						>
							🔍 Detect File Types
						</button>
					</div>

					<div style="flex: 1; display: flex; align-items: center">
						<div id="detection-progress" style="display: none; flex: 1; max-width: 400px">
							<div style="font-size: 12px; color: #666; margin-bottom: 4px">
								<span id="progress-text">Processing...</span>
							</div>
							<div
								style="
									width: 100%;
									background: #e0e0e0;
									border-radius: 4px;
									height: 8px;
									overflow: hidden;
								"
							>
								<div
									id="progress-bar"
									style="width: 0%; background: #28a745; height: 100%; transition: width 0.3s"
								></div>
							</div>
						</div>
					</div>

					<div style="display: flex; gap: 15px">
						<div>
							<label style="font-size: 12px; color: #666; display: block; margin-bottom: 4px"
								>Set Selected Data Type:</label
							>
							<select
								id="set-all-datatype"
								style="padding: 6px 10px; border: 1px solid #ddd; border-radius: 4px"
							>
								<option value="">-</option>
								<option value="Unknown">Unknown</option>
								<option value="Genotype">Genotype</option>
							</select>
						</div>
						<div>
							<label style="font-size: 12px; color: #666; display: block; margin-bottom: 4px"
								>Set Selected Source:</label
							>
							<select
								id="set-all-source"
								style="padding: 6px 10px; border: 1px solid #ddd; border-radius: 4px"
							>
								<option value="">-</option>
								<option value="Unknown">Unknown</option>
								<option value="23andMe">23andMe</option>
								<option value="AncestryDNA">AncestryDNA</option>
								<option value="Genes for Good">Genes for Good</option>
								<option value="Dynamic DNA">Dynamic DNA</option>
							</select>
						</div>
						<div>
							<label style="font-size: 12px; color: #666; display: block; margin-bottom: 4px"
								>Set Selected GRCh Version:</label
							>
							<select
								id="set-all-grch"
								style="padding: 6px 10px; border: 1px solid #ddd; border-radius: 4px"
							>
								<option value="">-</option>
								<option value="Unknown">Unknown</option>
								<option value="36">36</option>
								<option value="37">37</option>
								<option value="38">38</option>
							</select>
						</div>
					</div>
				</div>

				<div style="flex: 1; overflow-y: auto; border: 1px solid #ddd; border-radius: 4px">
					<table style="width: 100%; border-collapse: collapse">
						<thead style="position: sticky; top: 0; background: #f5f5f5; z-index: 1">
							<tr>
								<th
									style="
										padding: 10px;
										text-align: center;
										border-bottom: 2px solid #ddd;
										font-size: 13px;
										width: 40px;
									"
								>
									<input type="checkbox" id="select-all-review" />
								</th>
								<th
									class="sortable-header"
									data-sort-field="path"
									style="
										padding: 10px;
										text-align: left;
										border-bottom: 2px solid #ddd;
										font-size: 13px;
										cursor: pointer;
										user-select: none;
									"
								>
									File Path <span class="sort-indicator"></span>
								</th>
								<th
									class="sortable-header"
									data-sort-field="data_type"
									style="
										padding: 10px;
										text-align: left;
										border-bottom: 2px solid #ddd;
										font-size: 13px;
										width: 150px;
										cursor: pointer;
										user-select: none;
									"
								>
									Data Type <span class="sort-indicator"></span>
								</th>
								<th
									class="sortable-header"
									data-sort-field="source"
									style="
										padding: 10px;
										text-align: left;
										border-bottom: 2px solid #ddd;
										font-size: 13px;
										width: 150px;
										cursor: pointer;
										user-select: none;
									"
								>
									Source <span class="sort-indicator"></span>
								</th>
								<th
									class="sortable-header"
									data-sort-field="grch_version"
									style="
										padding: 10px;
										text-align: left;
										border-bottom: 2px solid #ddd;
										font-size: 13px;
										width: 120px;
										cursor: pointer;
										user-select: none;
									"
								>
									GRCh Version <span class="sort-indicator"></span>
								</th>
								<th
									class="sortable-header"
									data-sort-field="row_count"
									style="
										display: none;
										padding: 10px;
										text-align: left;
										border-bottom: 2px solid #ddd;
										font-size: 13px;
										width: 100px;
										cursor: pointer;
										user-select: none;
									"
								>
									Rows <span class="sort-indicator"></span>
								</th>
								<th
									class="sortable-header"
									data-sort-field="chromosome_count"
									style="
										display: none;
										padding: 10px;
										text-align: left;
										border-bottom: 2px solid #ddd;
										font-size: 13px;
										width: 100px;
										cursor: pointer;
										user-select: none;
									"
								>
									Chromosomes <span class="sort-indicator"></span>
								</th>
								<th
									class="sortable-header"
									data-sort-field="inferred_sex"
									style="
										display: none;
										padding: 10px;
										text-align: left;
										border-bottom: 2px solid #ddd;
										font-size: 13px;
										width: 100px;
										cursor: pointer;
										user-select: none;
									"
								>
									Sex <span class="sort-indicator"></span>
								</th>
							</tr>
						</thead>
						<tbody id="review-files-table"></tbody>
					</table>
				</div>

				<div
					style="
						display: flex;
						justify-content: flex-end;
						gap: 10px;
						margin-top: 20px;
						flex-shrink: 0;
					"
				>
					<button
						id="review-back-btn"
						style="
							padding: 12px 24px;
							background: #6c757d;
							color: white;
							border: none;
							border-radius: 4px;
							cursor: pointer;
							font-size: 14px;
						"
					>
						← Back
					</button>
					<button
						id="review-import-btn"
						style="
							padding: 12px 24px;
							background: #0066cc;
							color: white;
							border: none;
							border-radius: 4px;
							cursor: pointer;
							font-size: 14px;
						"
					>
						Import Files →
					</button>
				</div>
			</div>
		</div>

		<div id="import-results-view" class="tab-content">
			<div class="table-container">
				<h2 style="margin-bottom: 20px">
					Import Results (<span id="import-results-count">0</span>)
				</h2>
				<p style="margin-bottom: 20px; color: #666" id="import-results-message"></p>
				<table>
					<thead>
						<tr>
							<th>ID</th>
							<th>Participant ID</th>
							<th>File Path</th>
							<th>Hash</th>
							<th>Created At</th>
						</tr>
					</thead>
					<tbody id="import-results-table"></tbody>
				</table>
			</div>
			<button class="done-button" id="done-btn">Done</button>
		</div>

		<div id="logs-view" class="tab-content">
			<div
				style="padding: 20px; display: flex; flex-direction: column; height: 100%; overflow: hidden"
			>
				<div
					style="
						display: flex;
						justify-content: space-between;
						align-items: center;
						margin-bottom: 20px;
					"
				>
					<h2 style="margin: 0">Command Logs</h2>
					<div style="display: flex; gap: 10px">
						<button
							id="copy-logs-btn"
							style="
								padding: 8px 16px;
								background: #17a2b8;
								color: white;
								border: none;
								border-radius: 4px;
								cursor: pointer;
							"
						>
							📋 Copy All
						</button>
						<button
							id="clear-logs-btn"
							style="
								padding: 8px 16px;
								background: #dc3545;
								color: white;
								border: none;
								border-radius: 4px;
								cursor: pointer;
							"
						>
							🗑️ Clear Logs
						</button>
					</div>
				</div>
				<div
					style="flex: 1; overflow-y: auto; background: #1e1e1e; border-radius: 4px; padding: 15px"
				>
					<pre
						id="logs-content"
						style="
							color: #d4d4d4;
							font-family: 'Courier New', monospace;
							font-size: 12px;
							margin: 0;
							white-space: pre-wrap;
							word-wrap: break-word;
						"
					></pre>
				</div>
			</div>
		</div>

		<div id="settings-view" class="tab-content">
			<div style="padding: 40px; max-width: 800px; margin: 0 auto; overflow-y: auto; height: 100%">
				<h2 style="margin-bottom: 30px">Settings</h2>

				<div style="display: flex; flex-direction: column; gap: 25px">
					<div
						class="setting-item"
						style="
							background: #f0f8ff;
							padding: 15px;
							border-radius: 4px;
							border-left: 4px solid #0066cc;
						"
					>
						<label style="display: block; font-weight: 600; margin-bottom: 8px; color: #0066cc"
							>BioVault Config Path</label
						>
						<div
							id="config-path-display"
							style="font-family: monospace; font-size: 13px; color: #333; word-break: break-all"
						>
							Loading...
						</div>
						<p style="color: #666; font-size: 12px; margin-top: 5px">
							Current configuration directory
						</p>
					</div>

					<!-- Dependencies section with two-panel layout -->
					<div class="setting-item">
						<label style="display: block; font-weight: 600; margin-bottom: 15px"
							>System Dependencies</label
						>

						<!-- Two-panel layout -->
						<div style="display: flex; gap: 15px; margin-bottom: 20px; height: 350px">
							<!-- Left panel: Dependencies list -->
							<div
								id="settings-deps-list"
								style="
									flex: 0 0 220px;
									background: #f8f9fa;
									padding: 15px;
									border-radius: 8px;
									overflow-y: auto;
								"
							>
								<!-- Dependencies will be populated here -->
								<div style="text-align: center; color: #999; padding: 20px">
									<div class="spinner" style="width: 24px; height: 24px; margin: 0 auto 15px"></div>
									<p>Checking...</p>
								</div>
							</div>

							<!-- Right panel: Dependency details -->
							<div
								id="settings-dep-details-panel"
								style="
									flex: 1;
									background: #fff;
									border: 2px solid #0066cc;
									border-radius: 8px;
									padding: 20px;
									overflow-y: auto;
								"
							>
								<div style="text-align: center; color: #999; padding: 40px 20px">
									<p>← Click on a dependency to view details</p>
								</div>
							</div>
						</div>

						<!-- Buttons for checking and installing -->
						<div style="display: flex; gap: 10px">
							<button id="settings-check-again-btn" style="background: #17a2b8; padding: 10px 20px">
								Check Again
							</button>
							<button
								id="settings-install-missing-deps-btn"
								disabled
								style="background: #28a745; padding: 10px 20px; white-space: nowrap"
							>
								Install Missing
							</button>
						</div>
					</div>

					<div class="setting-item">
						<label style="display: block; font-weight: 600; margin-bottom: 8px">Email</label>
						<input
							type="email"
							id="setting-email"
							placeholder="user@example.com"
							style="
								width: 100%;
								padding: 10px;
								border: 1px solid #ddd;
								border-radius: 4px;
								font-size: 14px;
							"
						/>
						<p style="color: #666; font-size: 12px; margin-top: 5px">Your email address</p>
					</div>

					<div class="setting-item">
						<label style="display: block; font-weight: 600; margin-bottom: 15px"
							>SyftBox Integration</label
						>
						<div
							style="
								display: flex;
								align-items: center;
								justify-content: space-between;
								padding: 15px;
								background: #f8f9fa;
								border-radius: 4px;
								border: 1px solid #ddd;
							"
						>
							<div>
								<div style="display: flex; align-items: center; gap: 10px; margin-bottom: 5px">
									<span style="font-weight: 500; font-size: 14px">Status:</span>
									<span
										id="syftbox-status-badge"
										style="
											display: inline-flex;
											align-items: center;
											gap: 5px;
											padding: 4px 12px;
											border-radius: 12px;
											font-size: 13px;
											font-weight: 500;
										"
									>
										<span class="spinner" style="width: 12px; height: 12px; margin: 0"></span>
										Checking...
									</span>
								</div>
								<p style="color: #666; font-size: 12px; margin: 0">
									Connect to SyftBox for secure data sharing
								</p>
							</div>
							<button
								id="syftbox-auth-btn"
								disabled
								style="
									padding: 10px 20px;
									background: #667eea;
									color: white;
									border: none;
									border-radius: 4px;
									cursor: pointer;
									font-size: 14px;
									font-weight: 500;
								"
							>
								Authenticate
							</button>
						</div>
					</div>

					<div class="danger-zone">
						<h3>⚠️ Danger Zone</h3>
						<p>
							This will delete ALL BioVault data including participants, files, projects, and runs.
							This cannot be undone!
						</p>
						<button
							id="reset-all-btn"
							class="danger-btn"
							style="
								padding: 12px 24px;
								border: none;
								border-radius: 4px;
								cursor: pointer;
								font-size: 14px;
								font-weight: 500;
								color: white;
							"
						>
							Reset All Data
						</button>
					</div>
				</div>
			</div>
		</div>

		<script type="module" src="/main.js"></script>
	</body>
</html>
