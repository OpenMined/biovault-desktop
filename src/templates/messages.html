<div class="view-container">
	<!-- Page Header -->
	<header class="page-header message-page-header">
		<div class="page-header-left">
			<p class="page-eyebrow">Secure inbox</p>
			<h1 class="page-title">Messages</h1>
			<p class="page-subtitle">Stay in sync with collaborators and pipelines in real time.</p>
		</div>
		<div class="message-hero-actions">
			<div class="message-syftbox-status">
				<span id="message-syftbox-indicator" class="status-offline">Offline</span>
				<select id="message-syftbox-dropdown">
					<option value="online">Go Online</option>
					<option value="offline">Go Offline</option>
				</select>
			</div>
			<button id="new-message-btn" class="message-cta">Compose</button>
			<button id="message-test-notification-btn" class="message-secondary">
				Test Notification
			</button>
			<button id="message-native-test-btn" class="message-secondary subtle">Native Test</button>
			<button id="message-applescript-test-btn" class="message-secondary subtle">
				AppleScript Test
			</button>
		</div>
	</header>

	<!-- Main Content -->
	<div class="view-content">
		<div id="messages-syftbox-warning" class="messages-warning" style="display: none">
			<div class="messages-warning-card">
				<h3>SyftBox Authorization Required</h3>
				<p>You need to authorize SyftBox before messaging is available.</p>
				<button id="messages-auth-btn" class="message-cta">Authorize SyftBox</button>
			</div>
		</div>
		<div class="messages-container">
			<div class="message-sidebar">
				<div class="message-sidebar-header">
					<div>
						<p class="sidebar-label">Conversations</p>
						<h3>Inbox</h3>
					</div>
					<span class="message-live-pill">Live</span>
				</div>
				<div class="message-filters">
					<button class="message-filter active" data-filter="inbox">Inbox</button>
					<button class="message-filter" data-filter="sent">Sent</button>
					<button class="message-filter" data-filter="all">All</button>
					<button id="refresh-messages-btn" class="message-secondary">Refresh</button>
				</div>
				<div id="message-list" class="message-list">
					<!-- Thread items rendered here -->
				</div>
			</div>

			<!-- Main message area -->
			<div id="messages-main" class="messages-main" style="display: none">
				<div class="message-header">
					<div class="message-header-info">
						<h3 id="message-thread-subject">New Message</h3>
						<span id="message-thread-participants" class="message-participants"></span>
					</div>
					<button id="delete-thread-btn" class="message-secondary" style="display: none">
						Delete Thread
					</button>
				</div>

				<div id="message-conversation" class="message-conversation">
					<!-- Messages rendered here -->
				</div>

				<div class="message-compose">
					<div class="message-compose-recipient" style="display: none">
						<label for="message-recipient-input">To:</label>
						<input
							type="email"
							id="message-recipient-input"
							placeholder="recipient@example.com"
							autocapitalize="off"
							autocomplete="off"
							autocorrect="off"
							spellcheck="false"
						/>
					</div>
					<div id="message-subject-wrapper" class="message-compose-subject" style="display: none">
						<label for="message-compose-subject">Subject:</label>
						<input
							type="text"
							id="message-compose-subject"
							placeholder="Message subject"
							autocapitalize="off"
							autocomplete="off"
							autocorrect="off"
							spellcheck="false"
						/>
					</div>
					<textarea
						id="message-compose-body"
						placeholder="Type your message..."
						autocapitalize="off"
						autocomplete="off"
						autocorrect="off"
						spellcheck="false"
					></textarea>
					<div class="message-compose-actions">
						<button id="message-send-btn" class="message-cta">Send</button>
					</div>
				</div>

				<div id="message-project-panel" class="message-project-panel" style="display: none">
					<!-- Project attachment panel -->
				</div>
			</div>

			<!-- Empty state -->
			<div id="messages-empty-state" class="messages-empty-state">
				<p>Select a conversation or start a new message</p>
			</div>
		</div>
	</div>
</div>
