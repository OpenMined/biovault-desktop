<div class="pipelines-and-projects-container">
	<!-- Pipelines Section -->
	<div class="section-card pipelines-section">
		<div class="section-header">
			<div class="section-title">
				<svg
					width="20"
					height="20"
					viewBox="0 0 24 24"
					fill="none"
					stroke="currentColor"
					stroke-width="2"
				>
					<circle cx="5" cy="12" r="3" />
					<circle cx="19" cy="12" r="3" />
					<line x1="8" y1="12" x2="16" y2="12" />
				</svg>
				<h3>Pipelines</h3>
				<span class="section-count" id="pipelines-count">0</span>
			</div>
			<button id="create-pipeline-btn" class="btn-primary-small">+ New Pipeline</button>
		</div>
		<div class="section-description">Multi-step workflows that chain projects together</div>
		<div class="pipelines-list" id="pipelines-list">
			<p style="color: #666; padding: 20px; text-align: center">
				No pipelines yet. Create one to get started.
			</p>
		</div>
	</div>

	<!-- Projects Section -->
	<div class="section-card projects-section">
		<div class="section-header">
			<div class="section-title">
				<svg
					width="20"
					height="20"
					viewBox="0 0 24 24"
					fill="none"
					stroke="currentColor"
					stroke-width="2"
				>
					<path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" />
					<path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" />
				</svg>
				<h3>Projects</h3>
				<span class="section-count" id="projects-count">0</span>
			</div>
			<button id="create-project-btn" class="btn-primary-small">+ New Project</button>
		</div>
		<div class="section-description">Reusable computational components used in pipelines</div>
		<div style="margin-top: 15px; margin-bottom: 15px">
			<details class="import-details">
				<summary>Import Project from URL</summary>
				<div style="display: flex; gap: 10px; margin-top: 10px">
					<input
						type="text"
						id="project-url-input"
						placeholder="Paste GitHub URL to project.yaml (e.g., https://github.com/OpenMined/biovault/blob/main/cli/examples/apol1-sheet/project.yaml)"
						style="flex: 1"
					/>
					<button id="import-project-btn">Import</button>
				</div>
			</details>
		</div>
		<div class="projects-list" id="projects-list">
			<p style="color: #666; padding: 20px; text-align: center">No projects imported yet.</p>
		</div>
	</div>
</div>

<!-- Create Project Wizard -->
<div id="create-project-modal" class="project-wizard-overlay" style="display: none">
	<div class="project-wizard">
		<aside class="project-wizard-sidebar">
			<h2>Create New Project</h2>
			<ol class="project-wizard-steps">
				<li data-step="0" class="active">1. Project Details</li>
				<li data-step="1">2. Inputs</li>
				<li data-step="2">3. Parameters</li>
				<li data-step="3">4. Outputs</li>
				<li data-step="4">5. Preview</li>
				<li data-step="5">6. Review &amp; Create</li>
			</ol>
			<p class="project-wizard-hint">
				Click on any step to navigate. Your progress is saved locally until you finish.
			</p>
		</aside>
		<div class="project-wizard-content">
			<section class="project-wizard-step" data-step="0">
				<header>
					<h3>Project Details</h3>
					<p>Start by naming your project and optionally choosing a template.</p>
				</header>
				<div class="project-wizard-grid">
					<label style="grid-column: 1 / -1">
						<span>Project Name *</span>
						<input
							type="text"
							id="new-project-name"
							placeholder="my-project"
							autocapitalize="none"
							autocorrect="off"
							spellcheck="false"
						/>
						<span id="project-name-error" class="validation-error" style="display: none"></span>
					</label>
					<label style="grid-column: 1 / -1">
						<span>Use Template</span>
						<select id="new-project-template">
							<option value="">Blank Project</option>
						</select>
					</label>
				</div>

				<!-- Advanced Options -->
				<details class="project-advanced-options" style="margin-top: 24px">
					<summary>Advanced Options</summary>
					<div class="advanced-options-content">
						<div class="project-destination-card">
							<label for="new-project-path">Destination Folder</label>
							<div class="project-path-input">
								<input type="text" id="new-project-path" readonly />
								<div class="project-path-buttons">
									<button id="project-path-browse-btn" class="secondary-btn" type="button">
										Browse…
									</button>
									<button id="project-path-reset-btn" class="secondary-btn" type="button">
										Use Default
									</button>
								</div>
							</div>
							<p class="project-path-hint">
								Defaults to BioVault projects (BIOVAULT_HOME/projects/&lt;name&gt;). Choose a
								different location if you prefer.
							</p>
						</div>
						<label style="margin-top: 16px">
							<span>Contract Version</span>
							<input
								type="text"
								id="new-project-version"
								placeholder="e.g. 1.0.0"
								autocapitalize="none"
								autocorrect="off"
								spellcheck="false"
								value="1.0.0"
								style="max-width: 200px"
							/>
						</label>
					</div>
				</details>
			</section>
			<section class="project-wizard-step" data-step="1">
				<header>
					<h3>Inputs</h3>
					<p>Describe the data your project expects.</p>
				</header>
				<div id="create-project-inputs"></div>
			</section>
			<section class="project-wizard-step" data-step="2">
				<header>
					<h3>Parameters</h3>
					<p>
						Add optional configuration knobs that surface in the UI. These values flow into your
						Nextflow workflow as <code>params.&lt;name&gt;</code>, allowing users to tailor
						behaviour per run.
					</p>
				</header>
				<div id="create-project-parameters"></div>
			</section>
			<section class="project-wizard-step" data-step="3">
				<header>
					<h3>Outputs</h3>
					<p>Define what artifacts this project produces.</p>
				</header>
				<div id="create-project-outputs"></div>
			</section>
			<section class="project-wizard-step" data-step="4">
				<header>
					<h3>Preview Generated Code</h3>
					<p>Review the project.yaml and workflow.nf files that will be generated.</p>
				</header>
				<div class="preview-controls">
					<button id="preview-expand-all" class="secondary-btn" type="button">Expand All</button>
					<button id="preview-collapse-all" class="secondary-btn" type="button">
						Collapse All
					</button>
				</div>
				<div class="project-preview-stack">
					<details
						class="preview-block preview-block-full"
						id="create-project-preview-yaml-wrapper"
					>
						<summary>project.yaml</summary>
						<pre class="code-block language-yaml" id="create-project-preview-yaml">
Preview will appear once details are filled in.</pre
						>
					</details>
					<details
						class="preview-block preview-block-full"
						id="create-project-preview-template-wrapper"
					>
						<summary>workflow.nf</summary>
						<pre class="code-block language-groovy" id="create-project-preview-template">
Preview will appear once details are filled in.</pre
						>
					</details>
				</div>
			</section>
			<section class="project-wizard-step" data-step="5">
				<header>
					<h3>Review &amp; Create</h3>
					<p>Confirm everything looks right before generating the project scaffolding.</p>
				</header>
				<div class="project-review-card">
					<dl class="project-review-info">
						<div>
							<dt>Name</dt>
							<dd id="create-project-review-name">—</dd>
						</div>
						<div>
							<dt>Template</dt>
							<dd id="create-project-review-template">Blank project</dd>
						</div>
						<div>
							<dt>Version</dt>
							<dd id="create-project-review-version">—</dd>
						</div>
						<div>
							<dt>Destination</dt>
							<dd id="create-project-review-path">—</dd>
						</div>
					</dl>
				</div>
				<div class="project-review-contract-full">
					<label>Pipeline Contract Summary</label>
					<pre id="create-project-review-ascii" class="project-spec-summary"></pre>
				</div>
			</section>
			<footer class="project-wizard-actions">
				<div class="left-actions">
					<button id="create-project-cancel" class="link-button" type="button">Cancel</button>
				</div>
				<div class="right-actions">
					<button id="create-project-back" class="secondary-btn" type="button">Back</button>
					<button id="create-project-next" class="primary-btn" type="button">Next</button>
					<button
						id="create-project-confirm"
						class="primary-btn"
						type="button"
						style="display: none"
					>
						Create Project
					</button>
				</div>
			</footer>
		</div>
	</div>
</div>

<div
	id="operation-modal"
	style="
		display: none;
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background: rgba(0, 0, 0, 0.55);
		z-index: 12000;
		align-items: center;
		justify-content: center;
	"
>
	<div class="operation-modal-content">
		<div class="spinner" style="width: 32px; height: 32px; margin-bottom: 16px"></div>
		<p id="operation-modal-text" class="operation-modal-text">Working...</p>
	</div>
</div>
