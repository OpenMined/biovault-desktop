<div class="view-container">
	<!-- Page Header -->
	<header class="page-header">
		<div class="page-header-left">
			<div class="page-header-title-row">
				<h1 class="page-title">Network</h1>
			</div>
			<p class="page-subtitle">Discover peers and datasets on the network</p>
		</div>
		<div class="page-header-right">
			<!-- View toggle -->
			<div class="pill-toggle pill-toggle-lg" id="network-view-toggle">
				<button class="pill-button active" data-view="peers">Peers</button>
				<button class="pill-button" data-view="datasets">Datasets</button>
			</div>

			<!-- Search -->
			<div class="page-header-search">
				<svg
					width="15"
					height="15"
					viewBox="0 0 24 24"
					fill="none"
					stroke="currentColor"
					stroke-width="2"
					stroke-linecap="round"
					stroke-linejoin="round"
				>
					<circle cx="11" cy="11" r="8"></circle>
					<line x1="21" y1="21" x2="16.65" y2="16.65"></line>
				</svg>
				<input type="text" id="network-search-input" placeholder="Search..." autocomplete="off" />
			</div>

			<div class="page-header-actions">
				<button id="network-refresh-btn" class="btn-secondary" title="Scan network">
					<svg
						width="14"
						height="14"
						viewBox="0 0 24 24"
						fill="none"
						stroke="currentColor"
						stroke-width="2"
						stroke-linecap="round"
						stroke-linejoin="round"
					>
						<circle cx="11" cy="11" r="8"></circle>
						<line x1="21" y1="21" x2="16.65" y2="16.65"></line>
					</svg>
					<span>Scan</span>
				</button>
			</div>
		</div>
	</header>

	<!-- Main Content -->
	<div class="view-content">
		<!-- Peers View -->
		<div class="network-content" id="peers-view">
			<!-- Info Box -->
			<div class="network-info-box" id="contacts-info-box">
				<svg
					class="info-box-icon"
					width="16"
					height="16"
					viewBox="0 0 24 24"
					fill="none"
					stroke="currentColor"
					stroke-width="2"
				>
					<circle cx="12" cy="12" r="10" />
					<path d="M12 16v-4" />
					<path d="M12 8h.01" />
				</svg>
				<span class="info-box-text"
					><strong>Trusted</strong> = encryption key imported, secure messaging enabled.
					<strong>Discovered</strong> = visible on network, click Add to import key.</span
				>
				<button class="info-box-dismiss" id="dismiss-contacts-info" title="Dismiss">×</button>
			</div>

			<!-- Trusted Contacts Section -->
			<section class="network-section contacts-section">
				<div class="section-header">
					<h3>
						<img src="assets/icons/user-lock.svg" width="16" height="16" alt="Trusted" />
						Trusted Contacts
					</h3>
					<span class="contact-count" id="contacts-count">0</span>
				</div>
				<p class="section-description">
					People you can send encrypted messages and collaborate with
				</p>
				<div id="contacts-list" class="contact-list">
					<div class="empty-state" id="contacts-empty">
						<p><strong>No trusted contacts yet</strong></p>
						<p>Click Scan to discover peers, then Add to import their key.</p>
					</div>
				</div>
			</section>

			<!-- Discovered Section -->
			<section class="network-section discovered-section">
				<div class="section-header">
					<h3>
						<img src="assets/icons/scan-eye.svg" width="16" height="16" alt="Discovered" />
						Discovered Peers
					</h3>
					<span class="contact-count" id="network-count">0</span>
				</div>
				<p class="section-description">
					Peers on the network — click Add to enable encrypted messaging
				</p>
				<div id="network-list" class="contact-list">
					<div class="empty-state" id="network-empty">
						<p><strong>No peers discovered</strong></p>
						<p>Click Scan to search for datasites synced to your SyftBox.</p>
					</div>
				</div>
			</section>
		</div>

		<!-- Datasets View -->
		<div class="network-content" id="datasets-view" style="display: none">
			<!-- Info Box for Datasets -->
			<div class="network-info-box dataset-info-box" id="datasets-info-box">
				<svg
					class="info-box-icon"
					width="16"
					height="16"
					viewBox="0 0 24 24"
					fill="none"
					stroke="currentColor"
					stroke-width="2"
				>
					<circle cx="12" cy="12" r="10" />
					<path d="M12 16v-4" />
					<path d="M12 8h.01" />
				</svg>
				<span class="info-box-text"
					>Datasets appear when peer datasites sync to your SyftBox.
					<strong>To publish:</strong> Create in Data tab, then run
					<code>bv dataset publish --name &lt;name&gt;</code></span
				>
				<button class="info-box-dismiss" id="dismiss-datasets-info" title="Dismiss">×</button>
			</div>

			<section class="network-section datasets-section">
				<div class="section-header">
					<h3>
						<img src="assets/icons/database.svg" width="16" height="16" alt="Datasets" />
						Published Datasets
					</h3>
					<span class="contact-count" id="datasets-count">0</span>
				</div>
				<p class="section-description">Datasets from peers on the network</p>
				<div id="datasets-list" class="dataset-grid">
					<div class="empty-state" id="datasets-empty">
						<p><strong>No datasets found</strong></p>
						<p>Click Scan to search for published datasets from synced datasites.</p>
					</div>
				</div>
			</section>
		</div>
	</div>
</div>

<!-- Contact Card Template -->
<template id="contact-card-template">
	<div class="contact-card" data-email="">
		<div class="contact-avatar">
			<canvas class="contact-identicon" width="48" height="48"></canvas>
		</div>
		<div class="contact-info">
			<div class="contact-email"></div>
			<div class="contact-fingerprint" title="Public key fingerprint"></div>
			<div class="contact-path-row">
				<div class="contact-path" title="Key bundle path"></div>
				<button class="btn btn-icon open-folder-btn" title="Open in Finder" style="display: none">
					<img src="assets/icons/folder-open.svg" width="14" height="14" alt="Open folder" />
				</button>
			</div>
		</div>
		<div class="contact-status">
			<span class="status-badge trusted" title="Encryption key imported">Trusted</span>
			<span
				class="status-badge warning"
				style="display: none"
				title="Key changed - verify before trusting"
				>Key Changed</span
			>
		</div>
		<div class="contact-actions">
			<button class="btn btn-icon message-btn" title="Send message" style="display: none">
				<img src="assets/icons/mail.svg" width="16" height="16" alt="Message" />
			</button>
			<button class="btn btn-icon add-btn" title="Import key" style="display: none">
				<img src="assets/icons/check-circle.svg" width="16" height="16" alt="Add" />
			</button>
			<button class="btn btn-icon trust-btn" title="Trust new key" style="display: none">
				<img src="assets/icons/user-lock.svg" width="16" height="16" alt="Trust" />
			</button>
			<button class="btn btn-icon remove-btn" title="Remove contact" style="display: none">
				<img src="assets/icons/x-circle.svg" width="16" height="16" alt="Remove" />
			</button>
		</div>
	</div>
</template>

<!-- Dataset Row Template -->
<template id="dataset-card-template">
	<div class="dataset-row" data-name="" data-owner="">
		<div class="dataset-row-owner">
			<canvas class="owner-identicon" width="32" height="32"></canvas>
			<span class="owner-email"></span>
		</div>
		<div class="dataset-row-info">
			<div class="dataset-row-name">
				<img src="assets/icons/database.svg" width="16" height="16" alt="Dataset" />
				<span class="dataset-name"></span>
				<span class="dataset-version chip"></span>
			</div>
			<div class="dataset-row-meta">
				<span class="dataset-description"></span>
			</div>
		</div>
		<div class="dataset-row-assets">
			<span class="assets-label">Assets:</span>
			<span class="assets-count"></span>
			<button class="btn-text expand-assets-btn" title="Show assets">
				<img src="assets/icons/chevron-down.svg" width="14" height="14" alt="Expand" />
			</button>
		</div>
		<div class="dataset-row-status">
			<span class="status-badge trusted" style="display: none" title="Trusted contact"
				>Trusted</span
			>
			<span class="status-badge has-mock" style="display: none" title="Has preview data"
				>Preview</span
			>
			<span class="status-badge is-own" style="display: none" title="Your dataset">Yours</span>
			<span class="status-badge availability">Checking...</span>
		</div>
		<div class="dataset-row-actions">
			<button
				class="btn btn-sm btn-primary new-session-btn"
				title="Create a new session with this dataset"
			>
				<img src="assets/icons/play.svg" width="12" height="12" alt="New Session" />
				<span>New Session</span>
			</button>
			<button
				class="btn btn-sm btn-secondary add-peer-btn"
				title="Add this peer"
				style="display: none"
			>
				<img src="assets/icons/user-round.svg" width="12" height="12" alt="Add Peer" />
			</button>
			<button
				class="btn btn-sm btn-secondary message-peer-btn"
				title="Send message"
				style="display: none"
			>
				<img src="assets/icons/mail.svg" width="12" height="12" alt="Message" />
			</button>
			<button class="btn btn-icon-sm open-dataset-btn" title="Open folder">
				<img src="assets/icons/folder-open.svg" width="14" height="14" alt="Open" />
			</button>
		</div>
	</div>
	<div class="dataset-assets-panel" style="display: none">
		<div class="dataset-code-snippet">
			<div class="code-snippet-header">
				<span class="code-snippet-label">Python</span>
				<button class="btn-text copy-snippet-btn" title="Copy to clipboard">
					<img src="assets/icons/copy.svg" width="14" height="14" alt="Copy" />
					<span>Copy</span>
				</button>
			</div>
			<pre class="code-snippet-code"><code></code></pre>
		</div>
		<div class="assets-list"></div>
	</div>
</template>

<!-- Asset Row Template -->
<template id="asset-row-template">
	<div class="asset-row" data-key="">
		<div class="asset-info">
			<span class="asset-key"></span>
			<span class="asset-type chip"></span>
			<span class="asset-size"></span>
		</div>
		<button class="btn btn-icon open-asset-btn" title="Open mock file location">
			<img src="assets/icons/folder-open.svg" width="12" height="12" alt="Open" />
		</button>
	</div>
</template>
